<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cartazista - Criador de Ofertas</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Inter:wght@400;600;800&display=swap"
        rel="stylesheet">
</head>

<body>

    <!-- LOGIN VIEW -->
    <div id="loginView" class="view">
        <div class="login-card">
            <div class="login-header">
                <h2>Cartazista</h2>
                <p>Acesso Administrativo</p>
            </div>
            <div class="login-form">
                <input type="email" id="emailInput" placeholder="E-mail">
                <input type="password" id="passwordInput" placeholder="Senha">
                <button id="loginBtn">ENTRAR</button>
            </div>
        </div>
    </div>

    <!-- DASHBOARD VIEW -->
    <div id="dashboardView" class="view hidden">
        <header class="dash-header">
            <div class="dash-logo">Cartazista <span>Admin</span></div>
            <button id="logoutBtn" class="logout-btn">Sair üö™</button>
        </header>
        <main class="dash-content">
            <div class="dash-welcome">
                <h1>Painel Administrativo</h1>
                <p>Bem-vindo, <span id="currentUserDisplay">Admin</span></p>
            </div>

            <!-- Stats Row -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-info">
                        <h3>Usu√°rios</h3>
                        <div class="stat-value" id="statsUserCount">1</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìÑ</div>
                    <div class="stat-info">
                        <h3>Cartazes</h3>
                        <div class="stat-value">‚àû</div>
                    </div>
                </div>
            </div>

            <!-- Actions Grid -->
            <h2>Acesso R√°pido</h2>
            <div class="dash-grid">
                <div class="dash-card" id="createPosterBtn">
                    <div class="card-icon">‚ûï</div>
                    <h3>Criar Novo Cartaz</h3>
                </div>
                <div class="dash-card disabled">
                    <div class="card-icon">‚öôÔ∏è</div>
                    <h3>Configura√ß√µes (Em Breve)</h3>
                </div>
            </div>

            <!-- User Management Section -->
            <div class="user-section">
                <div class="section-header">
                    <h2>Gerenciar Usu√°rios</h2>
                    <button id="showAddUserBtn" class="action-btn">Novo Usu√°rio üë§</button>
                </div>
                <div class="table-container">
                    <table class="user-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Email</th>
                                <th style="text-align:right">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="userTableBody">
                            <!-- Rows injected by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>

        <!-- Add User Modal -->
        <div id="addUserModal" class="modal hidden">
            <div class="modal-content">
                <h3>Novo Usu√°rio</h3>
                <div class="modal-form">
                    <input type="text" id="newUserName" placeholder="Nome Completo">
                    <input type="email" id="newUserEmail" placeholder="E-mail de Acesso">
                    <input type="password" id="newUserPass" placeholder="Senha">
                </div>
                <div class="modal-actions">
                    <button id="cancelAddUserBtn" class="secondary-btn">Cancelar</button>
                    <button id="confirmAddUserBtn" class="primary-btn">Salvar Usu√°rio</button>
                </div>
            </div>
        </div>
    </div>

    <!-- APP VIEW (The Editor) -->
    <div id="appView" class="view hidden">
        <div class="app-navbar">
            <button id="backToDashBtn" class="nav-btn hidden">üîô Painel</button>
            <button id="appLogoutBtn" class="nav-btn" style="background-color: #c0392b;">Sair üö™</button>
            <span>Editor de Cartazes</span>
        </div>
        <div class="app-container">
            <!-- Sidebar Controls -->
            <aside class="sidebar" id="sidebar">
                <div class="logo">
                    <h1>Cartazista</h1>
                </div>
                <!-- ... (rest of sidebar content) ... -->


                <div class="control-group">
                    <h3>Produto</h3>
                    <label>
                        <span>Texto de Destaque</span>
                        <input type="text" id="offerText" placeholder="Ex: OFERTA" value="OFERTA">
                    </label>
                    <label>
                        <span>Nome do Produto</span>
                        <input type="text" id="productName" placeholder="Ex: Banana Prata" value="BANANA PRATA">
                    </label>
                    <label>
                        <span>Categoria (Opcional)</span>
                        <input type="text" id="productCategory" value="" placeholder="Ex: Frutas">
                    </label>
                    <label>
                        <span>Detalhe (Opcional)</span>
                        <input type="text" id="productDetail" placeholder="Ex: Gra√∫da" value="GRAUDA">
                    </label>
                    <div class="price-row">
                        <label>
                            <span>Pre√ßo (R$)</span>
                            <input type="text" id="productPrice" placeholder="0,00" value="88,88">
                        </label>
                        <label>
                            <span>Unidade</span>
                            <select id="productUnit">
                                <option value="">Nenhuma</option>
                                <option value="Um">Um</option>
                                <option value="Kg">Kg</option>
                                <option value="Bdj">Bdj</option>
                                <option value="Saco">Saco</option>
                                <option value="Cada">Cada</option>
                                <option value="Cx">Cx</option>
                            </select>
                        </label>
                    </div>
                </div>

                <div class="control-group" id="paramsGroup">
                    <!-- Font Sizes -->
                    <h3>Tamanho da Fonte</h3>

                    <div class="price-row">
                        <label style="flex:1">
                            <span>Oferta</span>
                            <input type="number" id="fsOffer" step="0.5" value="">
                        </label>
                        <label style="flex:1">
                            <span>Produto</span>
                            <input type="number" id="fsName" step="0.5" value="">
                        </label>
                    </div>
                    <div class="price-row">
                        <label style="flex:1">
                            <span>Categ.</span>
                            <input type="number" id="fsCategory" step="0.5" value="">
                        </label>
                        <label style="flex:1">
                            <span>Detalhe</span>
                            <input type="number" id="fsDetail" step="0.5" value="">
                        </label>
                    </div>
                    <div class="price-row">
                        <label style="flex:1">
                            <span>Pre√ßo</span>
                            <input type="number" id="fsPrice" step="0.5" value="">
                        </label>
                    </div>

                    <!-- Vertical Scaling (Stretching) -->
                    <h3>Alongamento Vertical</h3>
                    <div class="price-row">
                        <label style="flex:1">
                            <span>Oferta</span>
                            <input type="number" id="scaleOffer" step="0.1" value="1.0">
                        </label>
                        <label style="flex:1">
                            <span>Produto</span>
                            <input type="number" id="scaleName" step="0.1" value="1.0">
                        </label>
                    </div>
                    <div class="price-row">
                        <label style="flex:1">
                            <span>Categ.</span>
                            <input type="number" id="scaleCategory" step="0.1" value="1.0">
                        </label>
                        <label style="flex:1">
                            <span>Detalhe</span>
                            <input type="number" id="scaleDetail" step="0.1" value="1.0">
                        </label>
                    </div>
                    <div class="price-row">
                        <label style="flex:1">
                            <span>Pre√ßo</span>
                            <input type="number" id="scalePrice" step="0.1" value="1.0">
                        </label>
                    </div>

                    <button id="resetFonts"
                        style="width:100%; margin-top:10px; padding:5px; background:#444; border:none; color:#ccc; cursor:pointer; border-radius:4px;">Restaurar
                        Padr√£o</button>
                </div>



                <div class="control-group">
                    <h3>A√ß√µes</h3>
                    <div class="action-row" style="display:flex; gap:10px; margin-bottom:10px;">
                        <button id="undoBtn" class="secondary-btn" title="Desfazer">‚Ü©Ô∏è Desfazer</button>
                        <button id="redoBtn" class="secondary-btn" title="Refazer">Refazer ‚Ü™Ô∏è</button>
                    </div>
                    <h3>Visual</h3>
                    <label>
                        <span>Fonte Principal</span>
                        <select id="fontSelect">
                            <option value="'Oferta do Dia', 'Anton', sans-serif">Padr√£o (Oferta do Dia)</option>
                            <option value="'Impact', sans-serif">Impact</option>
                            <option value="'Anton', sans-serif">Anton</option>
                        </select>
                    </label>
                    <label>
                        <span>Tema (Fundo)</span>
                        <select id="backgroundTheme">
                            <option value="white">Branco (Padr√£o)</option>
                            <option value="yellow">Amarelo</option>
                            <option value="vector" selected>Vetor (Amarelo Principal)</option>
                        </select>
                    </label>
                    </select>
                    </label>
                    <label>
                        <span>Imagem de Fundo/Logo</span>
                        <input type="file" id="bgUpload" accept="image/*">
                        <button id="clearBgBtn" class="text-btn-danger"
                            style="margin-top:5px; font-size:0.8rem; background:none; border:none; color:#ff453a; cursor:pointer; display:none;">remover
                            imagem ‚úñ</button>
                    </label>
                </div>

                <div class="control-group">
                    <h3>Layout de Impress√£o</h3>
                    <label>
                        <span>Tamanho do Papel</span>
                        <select id="paperSize">
                            <option value="A4">A4 (21 x 29.7 cm)</option>
                            <option value="A3">A3 (29.7 x 42 cm)</option>
                            <option value="A5">A5 (14.8 x 21 cm)</option>
                            <option value="Letter">Carta (21.6 x 27.9 cm)</option>
                            <option value="Legal">Of√≠cio (21.6 x 35.6 cm)</option>
                        </select>
                    </label>
                    <label>
                        <span>Formato da P√°gina</span>
                        <select id="orientation">
                            <option value="portrait">Retrato (Vertical)</option>
                            <option value="landscape">Paisagem (Horizontal)</option>
                        </select>
                    </label>
                    <label>
                        <span>Cartazes por Folha</span>
                        <select id="gridLayout">
                            <option value="1">1 (Tela Cheia)</option>
                            <option value="2">2 Cartazes</option>
                            <option value="4">4 Cartazes</option>
                            <option value="8">8 Cartazes</option>
                        </select>
                    </label>
                    <div class="action-buttons">
                        <button onclick="downloadPDF()" class="pdf-btn" id="btnDownloadPdf">
                            BAIXAR PDF üì•
                        </button>
                        <button onclick="window.print()" class="print-btn">
                            IMPRIMIR üñ®Ô∏è
                        </button>
                    </div>
                </div>
                <!-- Duplicate button removed -->
            </aside>

            <!-- Toggle Button -->
            <button id="sidebarToggle" class="sidebar-toggle" title="Ocultar/Mostrar Menu">‚óÄ</button>

            <!-- Preview Area -->
            <main class="preview-area">
                <div class="floating-zoom-control"
                    style="position: absolute; right: 20px; top: 20px; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 8px; border: 1px solid #444; backdrop-filter: blur(5px); z-index: 100; color: white; width: 220px; box-shadow: 0 4px 15px rgba(0,0,0,0.5);">
                    <span
                        style="display:flex; justify-content:space-between; font-weight: bold; font-size: 0.9em; margin-bottom: 8px; color: var(--accent-color);">
                        TAMANHO DO CONTE√öDO
                        <span id="contentScaleDisplay">100%</span>
                    </span>
                    <input type="range" id="contentScaleSlider" min="0.5" max="2.0" step="0.1" value="1.0"
                        style="width:100%; cursor: pointer;">
                </div>
                <div id="printContainer" class="print-container paper-a4 portrait layout-1">
                    <!-- Poster Template (Repeated via JS) -->
                    <div class="poster-card">
                        <div class="vector-bg"></div>
                        <div class="content">
                            <div class="offer-label">OFERTA</div>
                            <div class="product-name" contenteditable="true">BANANA PRATA</div>
                            <div class="product-detail" contenteditable="true">GRAUDA</div>
                            <div class="price-container">
                                <span class="currency">R$</span>
                                <span class="price-value" contenteditable="true">88,88</span>
                                <span class="unit-value"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
        integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="module" src="js/main.js"></script>
</body>

</html>